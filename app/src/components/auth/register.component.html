<div class="w-full">
  <form (ngSubmit)="onSubmit()" #registerForm="ngForm" class="space-y-6">
    <!-- Name Input -->
    <div class="relative">
      <div class="flex items-center">
        <i class="pi pi-user text-gray-400 mr-3"></i>
        <label for="name" class="text-sm font-semibold text-white">Nome Completo</label>
      </div>
      <input
        type="text"
        id="name"
        name="name"
        [(ngModel)]="name"
        (blur)="clearError()"
        placeholder="Seu nome completo"
        required
        class="w-full mt-2 px-4 py-3 rounded-lg bg-gray-900 text-gray-100 border border-gray-700 placeholder-gray-500 focus:border-gray-400 focus:ring-2 focus:ring-gray-400/20 focus:outline-none transition duration-200"
        [class.border-red-500]="registerForm.submitted && !isNameValid()"
      />
      <small *ngIf="registerForm.submitted && !name" class="text-red-400 text-xs mt-1 block ml-9">Nome é obrigatório</small>
      <small *ngIf="registerForm.submitted && name && !isNameValid()" class="text-red-400 text-xs mt-1 block ml-9">Nome deve ter no mínimo 3 caracteres e conter apenas letras</small>
    </div>

    <!-- Email Input -->
    <div class="relative">
      <div class="flex items-center">
        <i class="pi pi-envelope text-gray-400 mr-3"></i>
        <label for="email" class="text-sm font-semibold text-white">Email</label>
      </div>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="email"
        (blur)="clearError()"
        placeholder="Digite seu email"
        required
        autocomplete="email"
        inputmode="email"
        class="w-full mt-2 px-4 py-3 rounded-lg bg-gray-900 text-gray-100 border border-gray-700 placeholder-gray-500 focus:border-gray-400 focus:ring-2 focus:ring-gray-400/20 focus:outline-none transition duration-200"
        [class.border-red-500]="registerForm.submitted && !isEmailValid()"
      />
      <small *ngIf="registerForm.submitted && !email" class="text-red-400 text-xs mt-1 block ml-9">Email é obrigatório</small>
      <small *ngIf="registerForm.submitted && email && !isEmailValid()" class="text-red-400 text-xs mt-1 block ml-9">Email deve ser válido (ex: usuario@dominio.com)</small>
    </div>

    <!-- Password Input -->
    <div class="relative">
      <div class="flex items-center">
        <i class="pi pi-lock text-gray-400 mr-3"></i>
        <label for="password" class="text-sm font-semibold text-white">Senha</label>
      </div>
      <div class="relative mt-2">
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="password"
          name="password"
          [(ngModel)]="password"
          (blur)="clearError()"
          placeholder="Mínimo 6 caracteres"
          required
          autocomplete="new-password"
          class="w-full px-4 py-3 rounded-lg bg-gray-900 text-gray-100 border border-gray-700 placeholder-gray-500 focus:border-gray-400 focus:ring-2 focus:ring-gray-400/20 focus:outline-none transition duration-200"
          [class.border-red-500]="registerForm.submitted && !isPasswordValid()"
        />
        <button
          type="button"
          (click)="togglePasswordVisibility()"
          class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300"
        >
          <i [class]="showPassword ? 'pi pi-eye' : 'pi pi-eye-slash'"></i>
        </button>
      </div>
      <small *ngIf="registerForm.submitted && !password" class="text-red-400 text-xs mt-1 block ml-9">Senha é obrigatória</small>
      <small *ngIf="registerForm.submitted && password && !isPasswordValid()" class="text-red-400 text-xs mt-1 block ml-9">Senha deve ter no mínimo 6 caracteres</small>
    </div>

    <!-- Confirm Password Input -->
    <div class="relative">
      <div class="flex items-center">
        <i class="pi pi-lock text-gray-400 mr-3"></i>
        <label for="confirmPassword" class="text-sm font-semibold text-white">Confirmar Senha</label>
      </div>
      <div class="relative mt-2">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          id="confirmPassword"
          name="confirmPassword"
          [(ngModel)]="confirmPassword"
          (blur)="clearError()"
          placeholder="Digite a senha novamente"
          required
          autocomplete="new-password"
          class="w-full px-4 py-3 rounded-lg bg-gray-900 text-gray-100 border border-gray-700 placeholder-gray-500 focus:border-gray-400 focus:ring-2 focus:ring-gray-400/20 focus:outline-none transition duration-200"
          [class.border-red-500]="registerForm.submitted && (!confirmPassword || !doPasswordsMatch())"
        />
        <button
          type="button"
          (click)="toggleConfirmPasswordVisibility()"
          class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300"
        >
          <i [class]="showConfirmPassword ? 'pi pi-eye' : 'pi pi-eye-slash'"></i>
        </button>
      </div>
      <small *ngIf="registerForm.submitted && !confirmPassword" class="text-red-400 text-xs mt-1 block ml-9">Confirmação de senha é obrigatória</small>
      <small *ngIf="registerForm.submitted && confirmPassword && !doPasswordsMatch()" class="text-red-400 text-xs mt-1 block ml-9">As senhas não coincidem</small>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="bg-red-900/30 border border-red-700 text-red-300 px-4 py-3 rounded-lg text-sm flex items-start gap-3">
      <i class="pi pi-exclamation-circle mt-0.5"></i>
      <div>
        <p class="font-semibold">Erro ao fazer registro</p>
        <p class="text-sm">{{ error }}</p>
      </div>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      [disabled]="loading || !isFormValid()"
      [class.opacity-50]="!isFormValid()"
      class="w-full mt-8 px-4 py-3 bg-white hover:bg-gray-100 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:hover:bg-gray-400 text-black font-semibold rounded-lg transition duration-200 flex items-center justify-center"
    >
      <span *ngIf="!loading">Criar Conta</span>
      <span *ngIf="loading" class="flex items-center">
        <i class="pi pi-spin pi-spinner mr-2"></i>
        Criando...
      </span>
    </button>
    
    <!-- Login Link -->
    <div class="mt-8 text-center text-sm">
      <span class="text-gray-400">Já tem uma conta?</span>
      <button type="button" (click)="switchMode.emit()" class="text-white font-semibold ml-2 hover:underline cursor-pointer bg-transparent border-none p-0">
        Faça Login
      </button>
    </div>
  </form>
</div>
